# Package Vulnerability Fix - CWE-1321

## Issue
Package vulnerability detected in package-lock.json at line 1102.

## Solution

### Step 1: Check for Vulnerabilities
```bash
cd esg-backend
npm audit
```

This will show you all vulnerabilities in your dependencies.

### Step 2: Fix Vulnerabilities Automatically
```bash
npm audit fix
```

This command will:
- Update vulnerable packages to secure versions
- Maintain compatibility with your package.json

### Step 3: Fix with Force (if needed)
If `npm audit fix` doesn't resolve all issues:
```bash
npm audit fix --force
```

**Warning**: This may introduce breaking changes.

### Step 4: Manual Review
If some vulnerabilities cannot be auto-fixed:
```bash
npm audit
```

Review the output and manually update packages in package.json, then run:
```bash
npm install
```

### Step 5: Verify
```bash
npm audit
```

Should show 0 vulnerabilities.

## Common Vulnerable Packages to Watch

Based on your dependencies, pay attention to:
- `axios` - Keep updated to latest version
- `express` - Security patches are frequent
- `jsonwebtoken` - Critical for authentication security
- `multer` - File upload security
- `sqlite3` - Database security

## Best Practices

1. **Regular Updates**: Run `npm audit` weekly
2. **Lock File**: Commit package-lock.json to version control
3. **CI/CD Integration**: Add `npm audit` to your CI pipeline
4. **Dependency Review**: Review dependency updates before applying
5. **Security Alerts**: Enable GitHub Dependabot or similar tools

## After Fixing

1. Test your application thoroughly
2. Run all test suites
3. Check for breaking changes in updated packages
4. Update documentation if APIs changed

## Additional Security

Consider adding to your package.json scripts:
```json
{
  "scripts": {
    "audit": "npm audit",
    "audit:fix": "npm audit fix",
    "preinstall": "npm audit"
  }
}
```

This ensures security checks run before installations.
